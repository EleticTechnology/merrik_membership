<odoo>
    <record id="action_report_membership_card" model="ir.actions.report">
        <field name="name">Membership Card</field>
        <field name="model">merrikh.membership</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">merrikh_membership.report_membership_card</field>
        <field name="report_file">merrikh_membership.report_membership_card</field>
        <field name="print_report_name">'Membership Card - %s' % (object.sequence)</field>
    </record>

    <template id="report_membership_card">
        <t t-call="web.basic_layout">
            <t t-set="o" t-value="doc"/>
            <div class="page">
                <div style="border:2px solid #B10E0E;border-radius:14px; padding:16px;">
                    <!-- Header -->
                    <div style="display:flex;justify-content:space-between;align-items:center;">
                        <div>
                            <div style="font-size:20px;font-weight:700;color:#B10E0E;">
                                AL-MERRIKH MEMBERSHIP
                            </div>
                            <div style="font-size:12px;color:#555;">
                                Dubai &amp; Northern Emirates Fans Association
                            </div>
                        </div>
                        <div style="text-align:right;">
                            <div style="font-size:12px;color:#007A33;font-weight:700;">MEMBERSHIP NO</div>
                            <div style="font-size:18px;font-weight:800;">
                                <t t-esc="o.sequence"/>
                            </div>
                        </div>
                    </div>

                    <div style="height:10px;"></div>

                    <!-- Body -->
                    <div style="display:flex;gap:14px;">
                        <div style="width:30%;">
                            <t t-if="o.image">
                                <img t-att-src="'data:image/png;base64,%s' % (o.image.decode() if hasattr(o.image,'decode') else o.image)"
                                     style="width:100%;border-radius:12px;border:1px solid #ddd;"/>
                            </t>
                            <t t-else="">
                                <div style="width:100%;height:140px;border-radius:12px;border:1px dashed #ccc;display:flex;align-items:center;justify-content:center;color:#999;">
                                    No Photo
                                </div>
                            </t>
                        </div>

                        <div style="width:70%;">
                            <div style="font-size:14px;">
                                <div><span style="color:#777;">Name:</span> <strong><t t-esc="o.name"/></strong></div>
                                <div><span style="color:#777;">Type:</span> <strong><t t-esc="o.membership_type"/></strong></div>
                                <div><span style="color:#777;">Status:</span> <strong><t t-esc="o.state"/></strong></div>
                                <div><span style="color:#777;">Valid Until:</span> <strong><t t-esc="o.end_date"/></strong></div>
                            </div>

                            <div style="margin-top:10px;border-top:1px solid #eee;padding-top:10px;display:flex;justify-content:space-between;align-items:center;">
                                <div>
                                    <div style="font-size:11px;color:#555;">Scan to verify</div>
                                    <div style="font-size:11px;color:#999;">/membership/verify/…</div>
                                </div>
                                <div style="text-align:right;">
                                    <t t-set="verify_url" t-value="'%s/membership/verify/%s' % (request.env['ir.config_parameter'].sudo().get_param('web.base.url'), o.verify_uuid)"/>
                                    <t t-set="verify_url"
   t-value="'%s/membership/verify/%s' % (request.env['ir.config_parameter'].sudo().get_param('web.base.url'), o.verify_uuid)"/>

<img t-att-src="'/report/barcode/?barcode_type=QR&value=%s&width=90&height=90' % verify_url"/>

                                </div>
                            </div>

                            <div style="margin-top:10px;font-size:10px;color:#777;">
                                Colors: <span style="color:#B10E0E;font-weight:700;">Red</span> •
                                <span style="color:#FFD700;font-weight:700;">Gold</span> •
                                <span style="color:#007A33;font-weight:700;">Green</span>
                            </div>
                        </div>
                    </div>

                    <!-- Footer strip -->
                    <div style="margin-top:14px;height:10px;border-radius:10px;background:linear-gradient(90deg,#B10E0E 0%, #FFD700 50%, #007A33 100%);"></div>
                </div>
            </div>
        </t>
    </template>
</odoo>
